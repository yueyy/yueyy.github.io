<!DOCTYPE html>
<html>
  <head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="Do what you want to do.">
  <meta name="keyword" content="hexo-theme, vuejs">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      Annotation | Yue
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  
    css('css/plugins/gitment.css')
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
    <script src="/js/qrious.js"></script>
  
  
    <script src="/js/gitment.js"></script>
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  


</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>Yue</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>Annotation</h2>
  <p class="post-date">2018-05-03</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>[TOC]</p>
<h1 id="Java-Annotation"><a href="#Java-Annotation" class="headerlink" title="Java Annotation"></a>Java Annotation</h1><h2 id="What-is-annotation"><a href="#What-is-annotation" class="headerlink" title="What is annotation"></a>What is annotation</h2><blockquote>
<p><em>Annotations</em>, a form of metadata, provide data about a program that is not part of the program itself. Annotations have no direct effect on the operation of the code they annotate.</p>
</blockquote>
<p>​       注解（<a href="https://docs.oracle.com/javase/tutorial/java/annotations/" target="_blank" rel="noopener">Annotation</a>）是java1.5开始引入的一种注释机制。很多有名的框架都大量使用注解。Java注解用于为Java代码提供元数据，可被编译工具解析，不直接影响代码执行。</p>
<p>​        Annontation像一种修饰符一样，应用于包、类型、构造方法、方法、成员变量、参数及本地变量的声明语句中。</p>
<h2 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h2><p><img src="https://images0.cnblogs.com/blog/497634/201309/28123151-d471f82eb2bc4812b46cc5ff3e9e6b82.jpg" alt="image"></p>
<ul>
<li>每个Annotation对象都有唯一的RetentionPolicy属性</li>
<li>每个Annotation对象可以有若干ElementType属性</li>
<li>Annotation有许多实现类</li>
</ul>
<h2 id="Grammer"><a href="#Grammer" class="headerlink" title="Grammer"></a>Grammer</h2><p>注解通过<code>@interface</code>关键字进行定义</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> @<span class="class"><span class="keyword">interface</span> <span class="title">TestAnnotation</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TestAnnotation</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span>&#123;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以理解为将自定义好的<code>@TestAnnotation</code>标签贴到<code>Test</code>类上</p>
<p>但是注解要正常工作 还需要<strong>元注解</strong></p>
<h2 id="Meta-Annotation"><a href="#Meta-Annotation" class="headerlink" title="Meta Annotation"></a>Meta Annotation</h2><p>元注解是可以注解到注解上的注解。它是一种基本注解，但它能够应用到其他注解上。</p>
<p>Annotation Type</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>注解类型</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>@Documented</td>
<td>能够将注解中的元素包含到 Javadoc 中</td>
</tr>
<tr>
<td>@Retention</td>
<td>解释说明了这个注解的的存活时间</td>
</tr>
<tr>
<td>@Target</td>
<td>限定了注解运用场景</td>
</tr>
<tr>
<td>@Inherited</td>
<td>表示注解类型能被自动继承</td>
</tr>
<tr>
<td>@Repeatable</td>
<td>表示可重复</td>
</tr>
</tbody>
</table>
</div>
<h3 id="Documented"><a href="#Documented" class="headerlink" title="@Documented"></a>@Documented</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Documented</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="variable">@Target</span>(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public <span class="variable">@interface</span> Documented &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>@Documented</strong>表示拥有该注解的元素可通过javadoc此类的工具进行文档化。</p>
<p>该类型应用于注解那些影响客户使用带注释(comment)的元素声明的类型。如果类型声明是用Documented来注解的，这种类型的注解被作为被标注的程序成员的公共API。</p>
<p>例如，上面源码<code>@Retention</code>的定义中有一行<code>@Documented</code>，意思是指当前注解的元素会被javadoc工具进行文档化，那么在查看Java API文档时可查看当该注解元素。</p>
<h3 id="Retention"><a href="#Retention" class="headerlink" title="@Retention"></a>@Retention</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Documented</span></span><br><span class="line"><span class="variable">@Retention</span>((RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="variable">@Target</span>(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public <span class="variable">@interface</span> Retention &#123;</span><br><span class="line">    RetentionPolicy value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>RetentionPolicy</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>SOURCE</td>
<td>注解只在源码阶段保留，在编译器进行编译时它将被丢弃忽视</td>
</tr>
<tr>
<td>CLASS</td>
<td>注解只被保留到编译进行的时候，它并不会被加载到 JVM 中（Default）</td>
</tr>
<tr>
<td>RUNTIME</td>
<td>注解可以保留到程序运行的时候，它会被加载进入到 JVM 中，所以在程序运行时可以获取到它们</td>
</tr>
</tbody>
</table>
</div>
<p><strong>@Retention</strong>相当于一个时间戳 指明了标签张贴的时间周期，描述了注解的生命周期。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Retention</span>(RetentionPolicy。RUNTIME)</span><br><span class="line">public <span class="variable">@interface</span> TestAnnotation&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Target"><a href="#Target" class="headerlink" title="@Target"></a>@Target</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Documented</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="variable">@Target</span>(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public <span class="variable">@interface</span> Target &#123;</span><br><span class="line">    <span class="selector-tag">ElementType</span><span class="selector-attr">[]</span> <span class="selector-tag">value</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>@Target</strong>指定了注解运用的地方，限定了运用的场景</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ElementType</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>TYPE</td>
<td>类、接口（包括注解类型）或enum声明</td>
</tr>
<tr>
<td>FIELD</td>
<td>字段（域）声明，包括enum实例</td>
</tr>
<tr>
<td>METHOD</td>
<td>方法声明</td>
</tr>
<tr>
<td>PARAMETER</td>
<td>参数声明</td>
</tr>
<tr>
<td>CONSTRUCTOR</td>
<td>构造方法声明</td>
</tr>
<tr>
<td>LOCAL_VARIABLE</td>
<td>局部变量声明</td>
</tr>
<tr>
<td>ANNOTATION_TYPE</td>
<td>注解声明（用于另一个注解上）</td>
</tr>
<tr>
<td>PACKAGE</td>
<td>包声明</td>
</tr>
<tr>
<td>TYPE_PARAMETER</td>
<td>类型参数声明(since 1.8)</td>
</tr>
<tr>
<td>TYPE_USE</td>
<td>类型使用声明(since 1.8)</td>
</tr>
</tbody>
</table>
</div>
<p>若没有<code>@Target</code>元注解则默认可以适用所有的程序元素。</p>
<p>多个值使用需加上<code>{}</code>并用<code>,</code>隔开</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">Target</span>(<span class="keyword">value</span>=&#123;CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, <span class="keyword">PARAMETER</span>, <span class="keyword">TYPE</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>Type Annotation</strong> </p>
<p>TYPE_PARAMETER TYPE_USE</p>
<p>(since Java8)</p>
<p>以前的注解只能用在包、类、构造器、方法、成员变量、参数、局部变量。如果想在创建对象、类型转换、使用implements实现接口、使用throw声明抛出异常时使用则不行。</p>
<p><strong>Example</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE_USE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> NotNull &#123;</span><br><span class="line">    String value() <span class="keyword">default</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//implements实现接口中使用Type Annotation</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Test <span class="keyword">implements</span> <span class="meta">@NotNull</span>(value=<span class="string">"Serializable"</span>) Serializable&#123;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">//泛型中使用Type Annotation  、   抛出异常中使用Type Annotation</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="built_in">void</span> foo(List&lt;<span class="meta">@NotNull</span> <span class="built_in">String</span>&gt; list) throws <span class="meta">@NotNull</span>(value=<span class="string">"ClassNotFoundException"</span>) ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//创建对象中使用Type Annotation</span></span><br><span class="line">        <span class="built_in">Object</span> obj =<span class="keyword">new</span> <span class="meta">@NotNull</span> <span class="built_in">String</span>(<span class="string">"annotation.Test"</span>);</span><br><span class="line">        <span class="comment">//强制类型转换中使用Type Annotation</span></span><br><span class="line">        <span class="built_in">String</span> str = (<span class="meta">@NotNull</span> <span class="built_in">String</span>) obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在本地变量上的Annotation可以保留在class文件中</li>
<li>泛型类型可以被保留甚至在运行时被访问</li>
</ul>
<p>Type Annotation为Java程序中的校验提供了更多的可能性。相比于业务方面的校验，它更适用于计算机科学相关的一般性的格式校验。例如：空指针校验，数值范围校验，字符串格式校验等。</p>
<h3 id="Inherited"><a href="#Inherited" class="headerlink" title="@Inherited"></a>@Inherited</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Documented</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="variable">@Target</span>(ElementType.ANNOTATION_TYPE)</span><br><span class="line">public <span class="variable">@interface</span> Inherited &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>@Inherited</strong>表示该注解类型被自动继承。</p>
<p>如果用户在当前类中查询这个元注解类型并且当前类的声明中不包含这个元注解类型，那么也将自动查询当前类的父类是否存在Inherited元注解，这个动作将被重复执行知道这个标注类型被找到，或者是查询到顶层的父类。</p>
<p>也就是说，如果一个超类被 @Inherited 注解过的注解进行注解的话，那么如果它的子类没有被任何注解应用的话，那么这个子类就继承了超类的注解。 </p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Inherited</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="variable">@interface</span> Test &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">@Test</span></span><br><span class="line">public class A &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class B extends A &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>注解<code>@Test</code>被<code>@Inherited</code>修饰，类<code>A</code>被<code>@Test</code>修饰，类<code>B</code>继承自<code>A</code> ，于是类<code>B</code>也拥有<code>@Test</code>注解。</p>
<h3 id="Repeatable"><a href="#Repeatable" class="headerlink" title="@Repeatable"></a>@Repeatable</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.ANNOTATION_TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Repeatable &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Indicates the &lt;em&gt;containing annotation type&lt;/em&gt; for the</span></span><br><span class="line"><span class="comment">     * repeatable annotation type.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the containing annotation type</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Class&lt;? extends Annotation&gt; value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>@Repeatable</strong> since Java 1.8 作用是使注解的值可以同时取多个</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@interface</span> Persons &#123;</span><br><span class="line">    Person[]  value();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repeatable(Persons.class)</span></span><br><span class="line"><span class="meta">@interface</span> Person&#123;</span><br><span class="line">    String role <span class="keyword">default</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Person(role=<span class="meta-string">"artist"</span>)</span></span><br><span class="line"><span class="meta">@Person(role=<span class="meta-string">"coder"</span>)</span></span><br><span class="line"><span class="meta">@Person(role=<span class="meta-string">"PM"</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuperMan</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Repeatable(Persons.class)</code>中<code>Persons.class</code>相当于一个<strong>容器注解</strong>，即存放其它注解的地方。而<code>Persons</code>中又有一个<code>value</code>属性</p>
<p>相当于Persons是一张总的标签，上面贴<code>artist</code> <code>coder</code> <code>PM</code>等同类型但内容不一样的标签</p>
<h2 id="Annotations-applied-to-Java-code"><a href="#Annotations-applied-to-Java-code" class="headerlink" title="Annotations applied to Java code"></a>Annotations applied to Java code</h2><p><strong>内置注解</strong></p>
<h3 id="Override"><a href="#Override" class="headerlink" title="@Override"></a>@Override</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.SOURCE)</span><br><span class="line">public <span class="variable">@interface</span> Override &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>@Override</strong>用于标明此方法覆盖了父类的方法。</p>
<p>可适用元素为方法，仅仅保留在Java源文件中。</p>
<h3 id="Deprecated"><a href="#Deprecated" class="headerlink" title="@Deprecated"></a>@Deprecated</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Documented</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="variable">@Target</span>(value=&#123;CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE&#125;)</span><br><span class="line">public <span class="variable">@interface</span> Deprecated &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>@Deprecated</strong>用于标明已经过时的方法或者类。</p>
<p>可适用于除注解类型声明之外的所有元素，保留时长为运行时JVM</p>
<h3 id="SuppressWarnnings"><a href="#SuppressWarnnings" class="headerlink" title="@SuppressWarnnings"></a>@SuppressWarnnings</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Target</span>(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE&#125;)</span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.SOURCE)</span><br><span class="line">public <span class="variable">@interface</span> SuppressWarnings &#123;</span><br><span class="line">    <span class="selector-tag">String</span><span class="selector-attr">[]</span> <span class="selector-tag">value</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>@SuppressWarnnings</strong>用于有选择的关闭编译器对类、方法、成员变量、变量初始化的警告。</p>
<p>可适合用于除注解类型声明和包名之外的所有元素，仅仅保留在java源文件中。</p>
<p>内部String数组主要接收值</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>deprecation</td>
<td>使用了过时的类或方法时的警告</td>
</tr>
<tr>
<td>unchecked</td>
<td>执行了未检查的转换时的警告</td>
</tr>
<tr>
<td>fallthrough</td>
<td>当Switch程序块进入进入下一个case而没有Break时的警告</td>
</tr>
<tr>
<td>path</td>
<td>在类路径、源文件路径等有不存在路径时的警告</td>
</tr>
<tr>
<td>serial</td>
<td>当可序列化的类缺少serialVersionUID定义时的警告</td>
</tr>
<tr>
<td>finally</td>
<td>任意finally子句不能正常完成时的警告</td>
</tr>
<tr>
<td>all</td>
<td>以上所有情况的警告</td>
</tr>
</tbody>
</table>
</div>
<h3 id="SafeVarargs"><a href="#SafeVarargs" class="headerlink" title="@SafeVarargs"></a>@SafeVarargs</h3><p><strong>@SafeVarargs</strong> since Java1.7 参数安全类型注解。目的是处理可变长参数中的泛型 此注解告诉编译器：在可变参数中的泛型是类型安全的</p>
<p>因为泛型的数据类型是运行时才确定的，因此把泛型存储到数组中时，编译器在编译阶段无法检查数据类型是否匹配，会给出警告信息：存在可能的”堆污染“（Heap Pollution） 如果泛型的真实数据类型无法和参数数组的类型匹配 会导致ClassCastException异常 因此在可变长参数中使用泛型时，编译器都会给出警告信息</p>
<h3 id="FunctionalInterface"><a href="#FunctionalInterface" class="headerlink" title="@FunctionalInterface"></a>@FunctionalInterface</h3><p><strong>@FunctionalInterface</strong> since Java1.8 函数式接口注解。函数式接口就是一个具有一个方法的普通接口。</p>
<p>线程开发中常用的Runnable就是典型的函数式接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * When an object implementing interface &lt;code&gt;Runnable&lt;/code&gt; is used</span></span><br><span class="line"><span class="comment">     * to create a thread, starting the thread causes the object's</span></span><br><span class="line"><span class="comment">     * &lt;code&gt;run&lt;/code&gt; method to be called in that separately executing</span></span><br><span class="line"><span class="comment">     * thread.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * The general contract of the method &lt;code&gt;run&lt;/code&gt; is that it may</span></span><br><span class="line"><span class="comment">     * take any action whatsoever.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@see</span>     java.lang.Thread#run()</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数式接口标记的作用是可以很容易转换为Lambda表达式</p>
<h3 id="Comparison"><a href="#Comparison" class="headerlink" title="Comparison"></a>Comparison</h3><div class="table-container">
<table>
<thead>
<tr>
<th>内建注解</th>
<th>Target</th>
<th>Retention</th>
</tr>
</thead>
<tbody>
<tr>
<td>Override</td>
<td>METHOD</td>
<td>SOURCE</td>
</tr>
<tr>
<td>SuppressWarnings</td>
<td>除ANNOTATION_TYPE和PACKAGE外的所有</td>
<td>SOURCE</td>
</tr>
<tr>
<td>Deprecated</td>
<td>除ANNOTATION_TYPE外的所有</td>
<td>RUNTIME</td>
</tr>
</tbody>
</table>
</div>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p><strong>example</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Documented</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="variable">@Inherited</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line">public <span class="variable">@interface</span> TestAnnotation&#123;</span><br><span class="line">    <span class="selector-tag">String</span> <span class="selector-tag">username</span>();</span><br><span class="line">    <span class="selector-tag">String</span> <span class="selector-tag">password</span>()；</span><br><span class="line">    <span class="selector-tag">int</span> <span class="selector-tag">id</span>() <span class="selector-tag">default</span> <span class="selector-tag">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>规则</strong></p>
<ol>
<li>注解方法不带参数</li>
<li>注解方法返回值类型：基本类型、String、Enums、Annotation以及其数组类型</li>
<li>注解方法可有默认值</li>
</ol>
<p><strong>注解的属性</strong></p>
<p>注解的属性也叫成员变量。注解只有成员变量，没有方法。无形参。</p>
<p>在注解中定义属性时它的类型必须是 8 种基本数据类型外加 类、接口、注解及它们的数组。</p>
<p><code>TestAnnotation</code>这个注解中拥有<code>username</code>  <code>password</code>   <code>id</code> 三个属性，在使用时则需要对其进行赋值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">TestAnnotation</span>(<span class="keyword">username</span>="<span class="keyword">a</span>",<span class="keyword">password</span>="<span class="keyword">aaaaaa</span>",<span class="keyword">id</span>=<span class="keyword">1</span>)</span><br><span class="line"><span class="keyword">public</span> class Test&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>若TestAnnotation注解只有一个属性，则可不写成员变量名，直接赋值</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TestAnnotation(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Theory"><a href="#Theory" class="headerlink" title="Theory"></a>Theory</h2><p><code>Annotation</code>其实是一种接口。Java所有注解都继承了<code>Annotation</code>接口。通过Java的<strong>反射</strong>机制相关的API来访问Annotation信息。反射类位于包java.lang.reflect，其中有一个接口<code>AnnotatedElement</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>返回值</th>
<th>方法</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>T</td>
<td>getAnnotation(Class annotationClass)</td>
<td>当存在该元素的指定类型注解，则返回相应注释，否则返回null</td>
</tr>
<tr>
<td>Annotation[]</td>
<td>getAnnotations()</td>
<td>返回此元素上存在的所有注解</td>
</tr>
<tr>
<td>Annotation[]</td>
<td>getDeclaredAnnotations()</td>
<td>返回直接存在于此元素上的所有注解。</td>
</tr>
<tr>
<td>boolean</td>
<td>isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass)</td>
<td>当存在该元素的指定类型注解，则返回true，否则返回false</td>
</tr>
</tbody>
</table>
</div>
<p>首先通过<code>Class</code>对象的<code>isAnnotationPresent()</code>判断它是否应用了某个注解，然后通过<code>getAnnotation()</code>来获取<code>Annotation</code>对象 或者是通过<code>getAnnotations()</code>方法。前者返回指定类型的注解 后者返回注解到这个元素上的所有注解。如果获取到的<code>Annotation</code>不为null，则就可以调用它们的属性方法了。</p>
<p><strong>一个注解要在运行时被成功提取，那么必须要@Retention(RetentionPolicy.RUNTIME)</strong></p>
<p>ps：因为注解的提取需要借助于Java反射技术 而反射比较慢 因此使用注解时需要考虑时间成本</p>
<h2 id="Advantage"><a href="#Advantage" class="headerlink" title="Advantage"></a>Advantage</h2><blockquote>
<p>注解很大程度上是一种辅助工具</p>
</blockquote>
<ul>
<li>提供信息给编译器： 编译器可以利用注解来探测错误和警告信息 <strong>（确保代码的正确性</strong></li>
<li>编译阶段时的处理： 软件工具可以用来利用注解信息来生成代码、Html文档或者做其它相应处理</li>
<li>运行时的处理： 某些注解可以在程序运行的时候接受代码的提取</li>
</ul>
<p>当开发者使用了<code>Annotation</code> 修饰了类、方法、Field 等成员之后，这些 <code>Annotation</code>不会自己生效，必须由开发者提供相应的代码来提取并处理<code>Annotation</code>信息。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RealmClass</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">RealmObject</span> <span class="keyword">implements</span> <span class="title">RealmModel</span>&#123;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">realmProcess</span><span class="params">(roundEnv: <span class="type">RoundEnviironment</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(classElement <span class="keyword">in</span> rounndEnv.getElementsAnnotatedWith(RealmClass::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>))</span>&#123;</span><br><span class="line">        generate(classElement <span class="keyword">as</span> TypeElement)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对<code>RealmObject</code>类进行<code>@RealmClass</code>注解后，因为所有模型类都要继承RealmObject，因此可以获取所有有<code>@RealmClass</code>注解的类，对每个有这个注解的对象同时进行操作。</p>
<p>​        Annotation不影响程序代码的执行，无论增加、删除，代码都始终如一的执行。如果希望让程序中的Annotation在运行时起一定的作用，只有通过某种配套工具对Annotation中的信息进行访问和处理。<strong>jdk7之前访问和处理Annotation的工具统称APT（Annotation Processing Tool)(jdk7后就被废除了），jdk7及之后采用了JSR 269 API。相关原因<a href="https://docs.oracle.com/javase/7/docs/technotes/guides/apt/" target="_blank" rel="noopener">官方说明</a>   和 <a href="http://openjdk.java.net/jeps/117" target="_blank" rel="noopener">原因</a>。</strong></p>
<h1 id="Android-Annotation"><a href="#Android-Annotation" class="headerlink" title="Android Annotation"></a>Android Annotation</h1><h2 id="Android-Support-Library"><a href="#Android-Support-Library" class="headerlink" title="Android Support Library"></a>Android Support Library</h2><p>Android Support Library 提供了很多实用注解。</p>
<p>可以<a href="https://developer.android.com/studio/write/annotations#enum-annotations" target="_blank" rel="noopener">使用注解改进代码检查</a></p>
<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><p> 实例化控件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">Bind</span>(<span class="keyword">R</span>.<span class="keyword">id</span>.<span class="keyword">btn</span>)</span><br><span class="line"><span class="keyword">Button</span> mBtn;</span><br></pre></td></tr></table></figure>
<p>设置控件点击事件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">Click</span>(<span class="keyword">R</span>.<span class="keyword">id</span>.<span class="keyword">btn</span>)</span><br><span class="line"><span class="keyword">void</span> btnClick()&#123;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在Android项目中使用Annotation 减少代码量 使代码更优雅</p>
<p>但是缺点就是反射会降低程序的运行速度 长期的话难以维护</p>
<h2 id="Android-APT"><a href="#Android-APT" class="headerlink" title="Android APT"></a>Android APT</h2><blockquote>
<p>APT(Annotation Processing Tool)</p>
</blockquote>
<h2 id="How-to-write-an-annotation-processor"><a href="#How-to-write-an-annotation-processor" class="headerlink" title="How to write an annotation processor"></a>How to write an annotation processor</h2><p><a href="http://hannesdorfmann.com/annotation-processing/annotationprocessing101" target="_blank" rel="noopener">ANNOTATION PROCESSING 101</a></p>
<p><a href="https://stackoverflow.com/questions/8587096/how-do-you-debug-java-annotation-processors-using-intellij" target="_blank" rel="noopener">how do you debug java annotation processors using intellij?</a></p>
<p>参考链接：</p>
<ul>
<li><a href="http://gityuan.com/2016/01/23/java-annotation/" target="_blank" rel="noopener">Java注解(Annotation)</a></li>
<li><a href="https://blog.csdn.net/briblue/article/details/73824058" target="_blank" rel="noopener">秒懂，Java 注解 （Annotation）你可以这样学</a></li>
<li><a href="https://www.cnblogs.com/skywang12345/p/3344137.html" target="_blank" rel="noopener">Java Annotation认知</a></li>
</ul>
<p>拓展阅读：</p>
<ul>
<li><a href="https://www.jianshu.com/p/28edf5352b63" target="_blank" rel="noopener">Java:Annotation(注解)—原理到案例</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-java8annotation/index.html" target="_blank" rel="noopener">Java 8 Annotation 新特性在软件质量和开发效率方面的提升</a></li>
<li><a href="https://juejin.im/post/5a9698a8f265da4e7d6077bc" target="_blank" rel="noopener">在Android中优雅地使用注解</a></li>
<li><a href="https://joyrun.github.io/2016/07/19/AptHelloWorld/" target="_blank" rel="noopener">Android APT（编译时代码生成）最佳实践</a></li>
</ul>
</section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2018/02/08/Mini-Project-DreamDragon/">
        <span class="nav-arrow">← </span>
        
          Mini Project DreamDragon
        
      </a>
    
    
      <a class="nav-right" href="/2018/05/11/Design-Pattern-Prototype-Pattern-Factory-Method-Pattern/">
        
          Design Pattern - Prototype Pattern &amp;&amp; Factory Method Pattern
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
      <div class="money-like">
        <div class="reward-btn">
          赏
          <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
          </span>
        </div>
        <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
      </div>
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">扫描二维码，分享此文章</p>
      </div>
    
    <!-- 二维码 END -->
    
      <!-- Gitment START -->
      <div id="comments"></div>
      <!-- Gitment END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Java-Annotation"><span class="toc-nav-text">Java Annotation</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#What-is-annotation"><span class="toc-nav-text">What is annotation</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Architecture"><span class="toc-nav-text">Architecture</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Grammer"><span class="toc-nav-text">Grammer</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Meta-Annotation"><span class="toc-nav-text">Meta Annotation</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Documented"><span class="toc-nav-text">@Documented</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Retention"><span class="toc-nav-text">@Retention</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Target"><span class="toc-nav-text">@Target</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Inherited"><span class="toc-nav-text">@Inherited</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Repeatable"><span class="toc-nav-text">@Repeatable</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Annotations-applied-to-Java-code"><span class="toc-nav-text">Annotations applied to Java code</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Override"><span class="toc-nav-text">@Override</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Deprecated"><span class="toc-nav-text">@Deprecated</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#SuppressWarnnings"><span class="toc-nav-text">@SuppressWarnnings</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#SafeVarargs"><span class="toc-nav-text">@SafeVarargs</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#FunctionalInterface"><span class="toc-nav-text">@FunctionalInterface</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Comparison"><span class="toc-nav-text">Comparison</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Usage"><span class="toc-nav-text">Usage</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Theory"><span class="toc-nav-text">Theory</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Advantage"><span class="toc-nav-text">Advantage</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Android-Annotation"><span class="toc-nav-text">Android Annotation</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Android-Support-Library"><span class="toc-nav-text">Android Support Library</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Examples"><span class="toc-nav-text">Examples</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Android-APT"><span class="toc-nav-text">Android APT</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#How-to-write-an-annotation-processor"><span class="toc-nav-text">How to write an annotation processor</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://yoursite.com/2018/05/03/Annotation/';
    var banner = 'undefined'
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


  <script>
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });
  </script>



  <script>
    var gitmentConfig = "yanm1ng";
    if (gitmentConfig !== 'undefined') {
      var gitment = new Gitment({
        id: "Annotation",
        owner: "yanm1ng",
        repo: "yanm1ng.github.io",
        oauth: {
          client_id: "0f87e490e00ee3fd87ef",
          client_secret: "4a9d2b148e7971c2201ad12131ce8bf8159ccd2e"
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  </script>




    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2019 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->

<script src="/js/script.js"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>